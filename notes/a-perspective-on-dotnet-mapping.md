# A perspective on mapping objects in .NET

## Introduction

Most or many of the projects I have been working on use AutoMapper - a popular library used to map object properties from one object to another. What is the basic idea? Well in many .NET projects you have entities mapping to a database. In many cases you also have classes with very similar properties to the entity classes - the intent being to use the non-entity class to present data in one way or another (e.g. an API endpoint). You might not always want to expose all the properties of your entity class to a front-end application. In such a situation you could use a transformation class (DTO). A DTO (Data Transformation Object) is a lightweight object used typically in API endpoints. Entity classes in the .NET world have a lot going on - metadata such as data annotations, for instance. DTOs are really just plain classes with no additional complexity. In many .NET projects you have some sort of entry to your application - an ASP.NET Web API, for example. The API would expose HTTP methods (POST,GET,PUT) to perform CRUD operations on a database. Most .NET applications use a database persistence somewhere. The entities in your database will probably use an ORM such as EF Core. EF Core maps the tables in your database to C# classes - entities. The purpose of the entities is to deal with  The endpoints produce JSON in many cases. While you theoretically can expose an entity to an endpoint it does mean you are potentially rendering irrelevant information to an endpoint. You might also want to apply some logic somewhere in your layered application to return specific pieces of information. The entity class can in some cases act as a conditional variable. You can then use the entity to return a DTO based the state of an entity class. 

Typically then a mapper library is used to take an entity class as an source and a DTO as a target. Most mappers also perform reverse mapping - from the DTO to the entity. Question is why would you want to do this? Well two schools of thought around mapping exist - manual mapping or auto mapping. Manual mapping is the process of generating a DTO from an entity class by using your own transformation methods. 

After watching [Mapster, the best .NET mapper that you are (probably) not using](https://www.youtube.com/watch?v=UIslFVEHkzA) and reading [Enjoy Using Mapster in .Net 6](https://medium.com/@M-S-2/enjoy-using-mapster-in-net-6-2d3f287a0989) I felt the need to explore the word of mapping for myself. To be honest up to this point I have only seen mapping as a necessary evil - in the projects I worked on I keep using them where they are used. In some cases though I use manual mapping, especially when writing projections from an EF Core DbContext. The thing that struck me most in the video is the performance gains - the difference performance difference between manual mapping seems very little.

So to get going I am going to create a small project - with a test project, and a class library. The goal is to get to the heart of the functionality - but to understand what is happening as well.